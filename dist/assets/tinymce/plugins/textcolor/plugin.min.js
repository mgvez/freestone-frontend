!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),o=tinymce.util.Tools.resolve("tinymce.util.Tools"),r=["000000","Black","993300","Burnt orange","333300","Dark olive","003300","Dark green","003366","Dark azure","000080","Navy Blue","333399","Indigo","333333","Very dark gray","800000","Maroon","FF6600","Orange","808000","Olive","008000","Green","008080","Teal","0000FF","Blue","666699","Grayish blue","808080","Gray","FF0000","Red","FF9900","Amber","99CC00","Yellow green","339966","Sea green","33CCCC","Turquoise","3366FF","Royal blue","800080","Purple","999999","Medium gray","FF00FF","Magenta","FFCC00","Gold","FFFF00","Yellow","00FF00","Lime","00FFFF","Aqua","00CCFF","Sky blue","993366","Red violet","FFFFFF","White","FF99CC","Pink","FFCC99","Peach","FFFF99","Light yellow","CCFFCC","Pale green","CCFFFF","Pale cyan","99CCFF","Light sky blue","CC99FF","Plum"],n=function(t){return t.getParam("textcolor_map",r)},a=function(t){return t.getParam("textcolor_rows",5)},l=function(t){return t.getParam("textcolor_cols",8)},c=function(t){return t.getParam("color_picker_callback",null)},i=function(t){return t.getParam("forecolor_cols",l(t))},u=function(t){return t.getParam("backcolor_cols",l(t))},m=c,s=tinymce.util.Tools.resolve("tinymce.util.I18n"),d=function(t,e){t.style.background=e,t.setAttribute("data-mce-color",e)},f=function(t){return function(e){var o=e.control;o._color?t.execCommand("mceApplyTextcolor",o.settings.format,o._color):t.execCommand("mceRemoveTextcolor",o.settings.format)}},g=function(t,r){return function(n){var a,l=this.parent(),c=function(t,e){var o;return t.dom.getParents(t.selection.getStart(),(function(t){var r;(r=t.style["forecolor"===e?"color":"background-color"])&&(o=r)})),o}(t,l.settings.format),i=function(e){l.hidePanel(),l.color(e),t.execCommand("mceApplyTextcolor",l.settings.format,e)};e.DOM.getParent(n.target,".mce-custom-color-btn")&&(l.hidePanel(),m(t).call(t,(function(t){var e,n,a,c=l.panel.getEl().getElementsByTagName("table")[0];for(e=o.map(c.rows[c.rows.length-1].childNodes,(function(t){return t.firstChild})),a=0;a<e.length&&(n=e[a]).getAttribute("data-mce-color");a++);if(a===r)for(a=0;a<r-1;a++)d(e[a],e[a+1].getAttribute("data-mce-color"));d(n,t),i(t)}),c)),(a=n.target.getAttribute("data-mce-color"))?(this.lastId&&e.DOM.get(this.lastId).setAttribute("aria-selected",!1),n.target.setAttribute("aria-selected",!0),this.lastId=n.target.id,"transparent"===a?(l.hidePanel(),l.resetColor(),t.execCommand("mceRemoveTextcolor",l.settings.format)):i(a)):null!==a&&l.hidePanel()}},F=function(t,o){return function(){var r=o?i(t):u(t),l=o?function(t){return t.getParam("forecolor_rows",a(t))}(t):function(t){return t.getParam("backcolor_rows",a(t))}(t),m=o?function(t){return t.getParam("forecolor_map",n(t))}(t):function(t){return t.getParam("backcolor_map",n(t))}(t),d=function(t){return"function"==typeof c(t)}(t);return function(t,o,r,n){var a,l,c,i,u,m,d,f=0,g=e.DOM.uniqueId("mcearia"),F=function(t,e){var o="transparent"===t;return'<td class="mce-grid-cell'+(o?" mce-colorbtn-trans":"")+'"><div id="'+g+"-"+f+++'" data-mce-color="'+(t||"")+'" role="option" tabIndex="-1" style="'+(t?"background-color: "+t:"")+'" title="'+s.translate(e)+'">'+(o?"&#215;":"")+"</div></td>"};for((a=function(t){var e,o=[];for(e=0;e<t.length;e+=2)o.push({text:t[e+1],color:"#"+t[e]});return o}(r)).push({text:s.translate("No color"),color:"transparent"}),c='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="list" cellspacing="0"><tbody>',i=a.length-1,m=0;m<o;m++){for(c+="<tr>",u=0;u<t;u++)c+=(d=m*t+u)>i?"<td></td>":F((l=a[d]).color,l.text);c+="</tr>"}if(n){for(c+='<tr><td colspan="'+t+'" class="mce-custom-color-btn"><div id="'+g+'-c" class="mce-widget mce-btn mce-btn-small mce-btn-flat" role="button" tabindex="-1" aria-labelledby="'+g+'-c" style="width: 100%"><button type="button" role="presentation" tabindex="-1">'+s.translate("Custom...")+"</button></div></td></tr>",c+="<tr>",u=0;u<t;u++)c+=F("","Custom color");c+="</tr>"}return c+"</tbody></table>"}(r,l,m,d)}};t.add("textcolor",(function(t){(function(t){t.addCommand("mceApplyTextcolor",(function(e,o){!function(t,e,o){t.undoManager.transact((function(){t.focus(),t.formatter.apply(e,{value:o}),t.nodeChanged()}))}(t,e,o)})),t.addCommand("mceRemoveTextcolor",(function(e){!function(t,e){t.undoManager.transact((function(){t.focus(),t.formatter.remove(e,{value:null},null,!0),t.nodeChanged()}))}(t,e)}))})(t),function(t){t.addButton("forecolor",{type:"colorbutton",tooltip:"Text color",format:"forecolor",panel:{role:"application",ariaRemember:!0,html:F(t,!0),onclick:g(t,i(t))},onclick:f(t)}),t.addButton("backcolor",{type:"colorbutton",tooltip:"Background color",format:"hilitecolor",panel:{role:"application",ariaRemember:!0,html:F(t,!1),onclick:g(t,u(t))},onclick:f(t)})}(t)}))}();