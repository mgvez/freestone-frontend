!function(){"use strict";var t=function(n){var e=n,o=function(){return e};return{get:o,set:function(t){e=t},clone:function(){return t(o())}}},n=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),o=function(t){return e.DOM.select(t.settings.ui_container)[0]},i=function(t,n){return{x:t,y:n}},r=function(t,n,e){return i(t.x+n,t.y+e)},u=function(t,n){if(t&&"static"!==e.DOM.getStyle(t,"position",!0)){var o=e.DOM.getPos(t),i=o.x-t.scrollLeft,u=o.y-t.scrollTop;return r(n,-i,-u)}return r(n,0,0)},c=function(t,n){if(t.inline)return u(o(t),i((f=n).pageX,f.pageY));var c,l,s,a,f,m=(c=t.getContentAreaContainer(),l=i((a=n).clientX,a.clientY),s=e.DOM.getPos(c),r(l,s.x,s.y));return u(o(t),m)},l=tinymce.util.Tools.resolve("tinymce.ui.Factory"),s=tinymce.util.Tools.resolve("tinymce.util.Tools"),a=function(t,n,e){t.on("contextmenu",(function(i){var r;r=t,(!i.ctrlKey||function(t){return t.settings.contextmenu_never_use_native}(r))&&(i.preventDefault(),function(t,n,e,i){null===i.get()?i.set(function(t,n){var e,i,r=[];i=function(t){return t.getParam("contextmenu","link openlink image inserttable | cell row column deletetable")}(t),s.each(i.split(/[ ,]/),(function(n){var e=t.menuItems[n];"|"===n&&(e={text:n}),e&&(e.shortcut="",r.push(e))}));for(var u=0;u<r.length;u++)"|"===r[u].text&&(0!==u&&u!==r.length-1||r.splice(u,1));return(e=l.create("menu",{items:r,context:"contextmenu",classes:"contextmenu"})).uiContainer=o(t),e.renderTo(o(t)),e.on("hide",(function(t){t.control===this&&n.set(!1)})),t.on("remove",(function(){e.remove(),e=null})),e}(t,e)):i.get().show(),i.get().moveTo(n.x,n.y),e.set(!0)}(t,c(t,i),n,e))}))};n.add("contextmenu",(function(n){var e=t(null),o=t(!1);return a(n,o,e),function(t){return{isContextMenuVisible:function(){return t.get()}}}(o)}))}();